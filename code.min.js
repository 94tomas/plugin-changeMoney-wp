Vue.config.productionTip=!1,Vue.component("money-changer",{data:()=>({primary:"#51bbac",url:"http://facturacion.macsystem.com.pe/api/tipo-cambio",date:"2021-01-20",typeMoney:"",coupon:"",initialOperation:"/",stringList:"",listDot:[],show:!0,updateBox:20,couponMsgOk:"El cupón ha sido reconocido correctamente.",couponMsgError:"El cupón no ha sido reconocido. Por favor verifica que el código ingresado sea el correcto.",toggle:!0,isActive:"compra",cotizacionCompra:0,cotizacionVenta:0,send:0,get:0,cotizacionVentaBanco:0,cotizacionCompraBanco:0,activeChange:"send",saveMoney:0,msgSuccess:!1,msgError:!1,tmpCurrentMoney:["2","3"],tmpAbrMoney:"US$",tmpAuxMoney:"Dólares"}),props:["wpcolor","wpurl","wptime","wptype","wplist","wpbtn","wpok","wperror"],mounted(){""==this.wpurl&&(this.show=!1),this.primary=this.wpcolor,this.url=this.wpurl,this.updateBox=+this.wptime;var t=new Date;const e=t.getFullYear().toString()+"-"+(t.getMonth()+1).toString()+"-"+t.getDate().toString();this.date=e,this.tmpCurrentMoney=JSON.parse(this.wptype),this.stringList=this.wplist,this.initialOperation=this.wpbtn,""!==this.wpok&&(this.couponMsgOk=this.wpok),this.wperror&&(this.couponMsgError=this.wperror),this.selectTypeMoney(this.tmpCurrentMoney[0]),setInterval(()=>{this.callApiMoneyChanger()},60*this.updateBox*1e3),this.generateList()},methods:{callApiMoneyChanger(){const t=this.url.split("/");""!==t[t.length-1]&&(this.url=this.url+"/"),fetch(`${this.url}${this.date}/${this.typeMoney}${""!==this.coupon?"/"+this.coupon:""}`,{headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"}}).then(async t=>{const e=await t.json();if(""!==this.coupon){if(!e.estado)return this.msgSuccess=!1,void(this.msgError=!0);this.msgError=!1,this.msgSuccess=!0,this.selectTypeMoney(e.idmoneda.toString())}else this.msgError=!1,this.msgSuccess=!1;this.cotizacionCompra=+e.cotizacioncompra,this.cotizacionVenta=+e.cotizacionventa,this.send=1e3,this.cotizacionVentaBanco=+e.cotizacion_venta_banco,this.cotizacionCompraBanco=+e.cotizacion_compra_banco,"send"===this.activeChange?this.changeMoneyInputSend():"get"===this.activeChange&&this.changeMoneyInputGet()}).catch(t=>{console.log(t)})},changeMoneySend(){this.changeMoneyInputSend(),this.activeChange="send"},changeMoneyGet(){this.changeMoneyInputGet(),this.activeChange="get"},btnToggleMoney(){this.toggle=!this.toggle,"compra"==this.isActive?this.isActive="venta":"venta"==this.isActive&&(this.isActive="compra"),"send"===this.activeChange?this.changeMoneyInputSend():"get"===this.activeChange&&this.changeMoneyInputGet()},selectTab(t){t!==this.isActive&&(this.isActive=t,this.toggle=!this.toggle,"send"===this.activeChange?this.changeMoneyInputSend():"get"===this.activeChange&&this.changeMoneyInputGet())},changeMoneyInputSend(){"venta"==this.isActive?(this.get=(this.send/this.cotizacionVenta).toFixed(2),this.saveMoney=(this.send/this.cotizacionVentaBanco-this.send/this.cotizacionVenta).toFixed(2),+this.saveMoney<=0&&(this.saveMoney=(-1*+this.saveMoney).toFixed(2))):"compra"==this.isActive&&(this.get=(this.cotizacionCompra*this.send).toFixed(2),this.saveMoney=(this.cotizacionCompra*this.send-this.send*this.cotizacionCompraBanco).toFixed(2),+this.saveMoney<=0&&(this.saveMoney=(-1*+this.saveMoney).toFixed(2)))},changeMoneyInputGet(){"compra"==this.isActive?(this.send=(this.get/this.cotizacionCompra).toFixed(2),this.saveMoney=(this.cotizacionCompra*this.send-this.send*this.cotizacionCompraBanco).toFixed(2),+this.saveMoney<=0&&(this.saveMoney=(-1*+this.saveMoney).toFixed(2))):"venta"==this.isActive&&(this.send=(this.cotizacionVenta*this.get).toFixed(2),this.saveMoney=(this.send/this.cotizacionVentaBanco-this.send/this.cotizacionVenta).toFixed(2),+this.saveMoney<=0&&(this.saveMoney=(-1*+this.saveMoney).toFixed(2)))},generateList(){this.stringList=this.stringList.replace(/(\r\n|\n|\r)/gm,"");this.stringList.split("-").forEach(t=>{if(""!=t){const e=t.split("#");e.length>1?this.listDot.push({text:e[0].trim(),tooltip:e[1].trim()}):this.listDot.push({text:e[0].trim(),tooltip:""})}})},changeVal(){""==this.coupon&&this.callApiMoneyChanger()},simulateCode(){""!==this.coupon&&this.callApiMoneyChanger()},selectTypeMoney(t){if(t!==this.typeMoney){switch(t){case"2":this.tmpAbrMoney="US$",this.tmpAuxMoney="Dólares";break;case"3":this.tmpAbrMoney="EUR",this.tmpAuxMoney="Euro";break;case"4":this.tmpAbrMoney="Otr",this.tmpAuxMoney="Otro"}this.typeMoney=t,this.callApiMoneyChanger()}},startOperation(){window.location.href=this.initialOperation}},template:'\n        <div class="e-content" v-if="show">\n            <div class="e-nav e-row e-mb-15">\n                <div class="e-col"\n                    :class="(tmpCurrentMoney.length==1) ? \'e-col-12\' : (tmpCurrentMoney.length==3) ? \'e-col-4\' : \'\'"\n                    v-for="(t, index) in tmpCurrentMoney"\n                    :key="index"\n                >\n                    <button\n                        @click="selectTypeMoney(t)"\n                        :class="(typeMoney == t)?\'active\':\'\'" \n                        :style="{ color: (typeMoney == t)?\'white !important\':\'\', background: (typeMoney == t)?primary+\' !important\':\'\', borderBottom: \'2px solid \'+primary }"\n                    >\n                        {{ (t == \'2\') ? \'Dólares\' : (t == \'3\') ? \'Euros\' : \'Otro\' }}\n                    </button>\n                </div>\n                \x3c!-- <div class="e-col e-col-4">\n                    <a href="javascript:;" @click="selectTypeMoney(\'2\')" :class="(typeMoney == \'2\')?\'active\':\'\'" :style="{ background: (typeMoney == \'2\')?primary:\'\', borderBottom: \'2px solid \'+primary }">\n                        Dólares\n                    </a>\n                </div>\n                <div class="e-col e-col-4">\n                    <a href="javascript:;" @click="selectTypeMoney(\'3\')" :class="(typeMoney == \'3\')?\'active\':\'\'" :style="{ background: (typeMoney == \'3\')?primary:\'\', borderBottom: \'2px solid \'+primary }">\n                        Euros\n                    </a>\n                </div>\n                <div class="e-col e-col-4">\n                    <a href="javascript:;" @click="selectTypeMoney(\'4\')" :class="(typeMoney == \'4\')?\'active\':\'\'" :style="{ background: (typeMoney == \'4\')?primary:\'\', borderBottom: \'2px solid \'+primary }">\n                        Otro\n                    </a>\n                </div> --\x3e\n            </div>\n            <div class="e-header e-row e-mb-25">\n                <div class="e-col">\n                    <div class="e-a" @click="selectTab(\'compra\')" :class="(isActive == \'compra\') ? \'active\' : \'\'" :style="{ borderColor: (isActive == \'compra\') ? primary : \'\' }">\n                        Compramos {{ tmpAbrMoney }} <br>\n                        S/{{ cotizacionCompra.toFixed(4) }}\n                    </div>\n                </div>\n                <div class="e-col">\n                    <div class="e-a" @click="selectTab(\'venta\')" :class="(isActive == \'venta\') ? \'active\' : \'\'" :style="{ borderColor: (isActive == \'venta\') ? primary : \'\' }">\n                        Vendemos {{ tmpAbrMoney }} <br>\n                        S/{{ cotizacionVenta.toFixed(4) }}\n                    </div>\n                </div>\n            </div>\n            <div class="e-wrap e-mb-15">\n                <div class="e-group">\n                    <div class="e-input">\n                        <label for="send">Envías</label>\n                        <input type="text" name="send" v-model="send" @input.prevent="changeMoneySend">\n                    </div>\n                    <div class="e-append" :style="{ backgroundColor: primary }">\n                        {{ (isActive == \'compra\') ? tmpAuxMoney : \'Soles\' }}\n                    </div>\n                </div>\n                <div class="e-wrap-btn">\n                    <button @click="btnToggleMoney">\n                        <svg style="width:35px;height:35px" viewBox="0 0 24 24" :style="{ transform: (toggle) ? \'rotate(90deg)\' : \'rotate(270deg)\' }">\n                            <path fill="currentColor" d="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12" />\n                        </svg>\n                    </button>\n                </div>\n                <div class="e-group">\n                    <div class="e-input">\n                        <label for="get">Recibes</label>\n                        <input type="text" name="get" v-model="get" @input.prevent="changeMoneyGet">\n                    </div>\n                    <div class="e-append" :style="{ backgroundColor: primary }">\n                        {{ (isActive == \'venta\') ? tmpAuxMoney : \'Soles\' }}\n                    </div>\n                </div>\n            </div>\n            <div class="e-wrap">\n                <div class="e-mb-10 e-text-center" :style="{color: primary}">\n                    <small>\n                        Ahorras <strong style="font-weight: 900;">{{ (isActive == \'compra\') ? \'S/\' : tmpAbrMoney }} {{ saveMoney }}</strong> vs los bancos\n                        <div class="e-tooltip" :style="{color: primary}">\n                            <svg style="width:20px;height:20px" viewBox="0 0 24 24">\n                                <path fill="currentColor" d="M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z" />\n                            </svg>\n                            <div class="e-tooltip-body">\n                                Tipo de cambio Promedio: S/{{ (isActive == \'compra\') ? cotizacionCompraBanco.toFixed(4) : cotizacionVentaBanco.toFixed(4) }}\n                            </div>\n                        </div>\n                    </small>\n                </div>\n                <div class="e-custom-input e-mb-15">\n                    <input type="text" v-model="coupon" @input="changeVal" placeholder="¿Si tienes un cupón? ingrésalo" :style="{borderColor: primary}">\n                    <div class="btn-append">\n                        <button @click="simulateCode" :style="{ background: primary+\' !important\' }">Simular</button>\n                    </div>\n                </div>\n                <div class="e-alert e-mb-15 success" v-if="msgSuccess">\n                    <div class="e-icon">\n                        <svg style="width:25px;height:28px" viewBox="0 0 24 24">\n                            <path fill="currentColor" d="M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2,4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z" />\n                        </svg>\n                    </div>\n                    {{ couponMsgOk }}\n                    <button class="e-btn-closed" @click="msgSuccess = false">×</button>\n                </div>\n                <div class="e-alert e-mb-15 error" v-if="msgError">\n                    <div class="e-icon">\n                        <svg style="width:50px;height:25px" viewBox="0 0 24 24">\n                            <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z" />\n                        </svg>\n                    </div>\n                    {{ couponMsgError }}\n                    <button class="e-btn-closed" @click="msgError = false">×</button>\n                </div>\n                <div class="e-mb-15">\n                    <button @click="startOperation" class="e-btn" :style="{ background: primary+\' !important\' }">\n                        Iniciar operación\n                        <svg style="width:24px;height:24px" viewBox="0 0 24 24">\n                            <path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />\n                        </svg>\n                    </button>\n                </div>\n                <ul class="e-list">\n                    <li v-for="(item, index) in listDot" :key="index" :style="{ color: primary }">\n                        {{ item.text }}\n                        <div class="e-tooltip" :style="{color: primary}" v-if="item.tooltip !== \'\'">\n                            <svg style="width:20px;height:20px" viewBox="0 0 24 24">\n                                <path fill="currentColor" d="M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z" />\n                            </svg>\n                            <div class="e-tooltip-body">\n                                {{ item.tooltip }}\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    '});var app=new Vue({el:"#app"});